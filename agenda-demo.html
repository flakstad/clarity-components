<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Clarity Agenda - Complete Demo</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.6;
      margin: 0;
      padding: 20px;
      background: #f5f5f5;
    }
    
    .demo-container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      overflow: hidden;
    }
    
    .demo-header {
      background: #2c3e50;
      color: white;
      padding: 2rem;
      text-align: center;
    }
    
    .demo-header h1 {
      margin: 0 0 0.5rem 0;
      font-size: 2.5rem;
    }
    
    .demo-header p {
      margin: 0;
      opacity: 0.9;
      font-size: 1.1rem;
    }
    
    .demo-section {
      padding: 2rem;
      border-bottom: 1px solid #eee;
    }
    
    .demo-section:last-child {
      border-bottom: none;
    }
    
    .demo-section h2 {
      margin-top: 0;
      color: #2c3e50;
      border-bottom: 2px solid #3498db;
      padding-bottom: 0.5rem;
    }
    
    .feature-list {
      background: #f8f9fa;
      padding: 1rem;
      border-radius: 4px;
      margin: 1rem 0;
    }
    
    .feature-list ul {
      margin: 0;
      padding-left: 1.5rem;
    }
    
    .feature-list li {
      margin-bottom: 0.5rem;
    }
    
    .code-block {
      background: #2c3e50;
      color: #ecf0f1;
      padding: 1rem;
      border-radius: 4px;
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      font-size: 0.9rem;
      overflow-x: auto;
      margin: 1rem 0;
    }
    
    .highlight {
      background: #fff3cd;
      padding: 0.2rem 0.4rem;
      border-radius: 3px;
      font-weight: bold;
    }
    
    .view-description {
      background: #e8f4f8;
      padding: 1rem;
      border-radius: 4px;
      margin: 1rem 0;
      border-left: 4px solid #3498db;
    }
    
    .theme-controls {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin: 1rem 0;
    }
    
    .theme-btn {
      background: #3498db;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      cursor: pointer;
      font-family: inherit;
      font-size: 0.9rem;
    }
    
    .theme-btn:hover {
      background: #2980b9;
    }
    
    /* Theme variations */
    body.theme-light {
      --bg-primary: #ffffff;
      --bg-secondary: #f8f9fa;
      --bg-tertiary: #e9ecef;
      --text-primary: #212529;
      --text-secondary: #6c757d;
      --text-muted: #adb5bd;
      --border: #dee2e6;
      --hover: rgba(0, 0, 0, 0.05);
    }
    
    body.theme-dark {
      --bg-primary: #1a1a1a;
      --bg-secondary: #2d2d2d;
      --bg-tertiary: #404040;
      --text-primary: #ffffff;
      --text-secondary: #b0b0b0;
      --text-muted: #808080;
      --border: #404040;
      --hover: rgba(255, 255, 255, 0.05);
    }
    
    @media (prefers-color-scheme: dark) {
      body:not(.theme-light) {
        --bg-primary: #1a1a1a;
        --bg-secondary: #2d2d2d;
        --bg-tertiary: #404040;
        --text-primary: #ffffff;
        --text-secondary: #b0b0b0;
        --text-muted: #808080;
        --border: #404040;
        --hover: rgba(255, 255, 255, 0.05);
      }
    }
  </style>
</head>
<body>
  <div class="demo-container">
    <div class="demo-header">
      <h1>Clarity Agenda - Complete Demo</h1>
      <p>Interactive agenda component with view toggles, project grouping, completion timestamps, and more</p>
    </div>
    
    <div class="demo-section">
      <h2>Interactive Agenda Demo</h2>
      <p>Use the toggle buttons in the header to switch between different views. Try all the features including priority tasks (shown as "priority" text), blocked tasks (shown as "blocked" text), completed tasks with strikethrough styling, and proper tag rendering with # symbols:</p>
      
      <div class="theme-controls">
        <button class="theme-btn" id="theme-btn" onclick="toggleTheme()">Theme: Auto</button>
      </div>
      
      <div class="view-description">
        <strong>🔄 View Toggle Buttons:</strong> Switch between Day, Week, Month, and All Tasks views
      </div>
      
      <div class="view-description">
        <strong>📅 Day View:</strong> Compact time slots with unscheduled tasks and overdue due-date tasks at the bottom
      </div>
      
      <div class="view-description">
        <strong>📋 All Tasks View:</strong> All tasks sorted alphabetically with project names prepended
      </div>
      
      <clarity-agenda 
        id="main-agenda"
        data-view="day"
        data-show-completed-tasks="true"
        data-tasks='[
          {
            "id": "1",
            "text": "Team standup meeting",
            "status": "TODO",
            "schedule": "Sep 9 09:00",
            "assign": "team"
          },
          {
            "id": "2",
            "text": "Review pull requests",
            "status": "TODO",
            "schedule": "Sep 9 10:30",
            "priority": "high",
            "assign": "alice"
          },
          {
            "id": "3",
            "text": "Deploy to production",
            "status": "TODO",
            "due": "Sep 9",
            "assign": "alice",
            "tags": ["deployment", "urgent"]
          },
          {
            "id": "4",
            "text": "Client presentation",
            "status": "TODO",
            "schedule": "Sep 10 14:00",
            "assign": "team"
          },
          {
            "id": "5",
            "text": "Code review session",
            "status": "TODO",
            "schedule": "Sep 11 15:30",
            "assign": "bob"
          },
          {
            "id": "6",
            "text": "Weekly planning",
            "status": "TODO",
            "schedule": "Sep 12 10:00",
            "assign": "team"
          },
          {
            "id": "7",
            "text": "Bug fix for login issue",
            "status": "DONE",
            "schedule": "Sep 8 16:00",
            "assign": "charlie",
            "completedAt": "2024-09-08T16:30:00Z"
          },
          {
            "id": "8",
            "text": "Database backup",
            "status": "TODO",
            "due": "Sep 13",
            "assign": "ops",
            "tags": ["maintenance"]
          },
          {
            "id": "9",
            "text": "Update documentation",
            "status": "BLOCKED",
            "due": "Sep 15",
            "assign": "alice",
            "tags": ["docs"]
          },
          {
            "id": "10",
            "text": "Performance optimization",
            "status": "DONE",
            "assign": "bob",
            "completedAt": "2024-09-07T14:20:00Z"
          },
          {
            "id": "11",
            "text": "Research new framework",
            "status": "TODO",
            "assign": "charlie",
            "tags": ["research"]
          },
          {
            "id": "12",
            "text": "Write unit tests",
            "status": "TODO",
            "assign": "diana",
            "tags": ["testing"]
          },
          {
            "id": "13",
            "text": "Setup CI/CD pipeline",
            "status": "TODO",
            "schedule": "Sep 13 11:00",
            "priority": "high",
            "assign": "bob"
          },
          {
            "id": "14",
            "text": "Critical security patch",
            "status": "TODO",
            "priority": true,
            "assign": "alice",
            "tags": ["security", "urgent"]
          },
          {
            "id": "15",
            "text": "Database migration",
            "status": "TODO",
            "blocked": true,
            "due": "Sep 14",
            "assign": "ops",
            "tags": ["database", "migration"]
          },
          {
            "id": "16",
            "text": "Code review for PR #123",
            "status": "DONE",
            "completedAt": "2024-09-11T10:30:00Z",
            "assign": "alice",
            "tags": ["review", "code"]
          },
          {
            "id": "17",
            "text": "Update documentation",
            "status": "DONE",
            "completedAt": "2024-09-10T16:45:00Z",
            "assign": "bob",
            "tags": ["docs", "maintenance"]
          },
          {
            "id": "18",
            "text": "Fix typo in README",
            "status": "DONE",
            "completedAt": "2024-09-09T14:20:00Z",
            "assign": "eve",
            "tags": ["docs", "typo"]
          },
          {
            "id": "19",
            "text": "Prepare presentation for client meeting",
            "status": "TODO",
            "due": "Sep 15",
            "assign": "alice",
            "tags": ["presentation", "client"]
          },
          {
            "id": "20",
            "text": "Deploy to staging environment",
            "status": "TODO",
            "due": "Sep 16",
            "assign": "bob",
            "tags": ["deployment", "staging"]
          },
          {
            "id": "21",
            "text": "Final testing before production release",
            "status": "TODO",
            "due": "Sep 17",
            "assign": "diana",
            "tags": ["testing", "production"]
          }
        ]'
        data-projects='[
          {
            "id": "project-1",
            "name": "Website Redesign",
            "tasks": [
              {
                "id": "p1-1",
                "text": "Create wireframes",
                "status": "TODO",
                "schedule": "Sep 9 11:00",
                "assign": "diana",
                "tags": ["design", "wireframes"]
              },
              {
                "id": "p1-2",
                "text": "Design mockups",
                "status": "DONE",
                "schedule": "Sep 8 15:00",
                "assign": "diana",
                "completedAt": "2024-09-08T15:45:00Z",
                "tags": ["design", "mockups"]
              },
              {
                "id": "p1-3",
                "text": "Implement responsive layout",
                "status": "TODO",
                "due": "Sep 12",
                "assign": "eve",
                "tags": ["frontend", "responsive"]
              },
              {
                "id": "p1-4",
                "text": "Optimize images",
                "status": "TODO",
                "assign": "eve",
                "tags": ["frontend", "optimization"]
              },
              {
                "id": "p1-5",
                "text": "Fix critical layout bug",
                "status": "TODO",
                "priority": true,
                "assign": "eve",
                "tags": ["frontend", "bug", "critical"]
              }
            ]
          },
          {
            "id": "project-2",
            "name": "Mobile App",
            "tasks": [
              {
                "id": "p2-1",
                "text": "Setup React Native project",
                "status": "DONE",
                "assign": "frank",
                "completedAt": "2024-09-06T10:15:00Z",
                "tags": ["mobile", "setup"]
              },
              {
                "id": "p2-2",
                "text": "Implement user authentication",
                "status": "TODO",
                "schedule": "Sep 10 09:00",
                "assign": "frank",
                "tags": ["mobile", "auth"]
              },
              {
                "id": "p2-3",
                "text": "Design app icons",
                "status": "TODO",
                "due": "Sep 14",
                "assign": "diana",
                "tags": ["design", "icons"]
              },
              {
                "id": "p2-4",
                "text": "Setup push notifications",
                "status": "TODO",
                "assign": "frank",
                "tags": ["mobile", "notifications"]
              },
              {
                "id": "p2-5",
                "text": "Implement offline sync",
                "status": "TODO",
                "blocked": true,
                "due": "Sep 16",
                "assign": "frank",
                "tags": ["mobile", "offline", "sync"]
              }
            ]
          },
          {
            "id": "project-3",
            "name": "Backend API",
            "tasks": [
              {
                "id": "p3-1",
                "text": "Setup database schema",
                "status": "DONE",
                "assign": "alice",
                "completedAt": "2024-09-05T16:30:00Z",
                "tags": ["backend", "database"]
              },
              {
                "id": "p3-2",
                "text": "Implement REST endpoints",
                "status": "TODO",
                "schedule": "Sep 11 10:00",
                "assign": "alice",
                "tags": ["backend", "api"]
              },
              {
                "id": "p3-3",
                "text": "Add API documentation",
                "status": "TODO",
                "due": "Sep 16",
                "assign": "bob",
                "tags": ["backend", "docs"]
              },
              {
                "id": "p3-4",
                "text": "Setup monitoring",
                "status": "TODO",
                "assign": "alice",
                "tags": ["backend", "monitoring"]
              }
            ]
          }
        ]'>
      </clarity-agenda>
    </div>
    
    <div class="demo-section">
      <h2>Key Features</h2>
      
      <div class="feature-list">
        <h3>🔄 View Toggle System</h3>
        <ul>
          <li><strong>Day View:</strong> Compact time slots with unscheduled tasks and overdue due-date tasks at the bottom</li>
          <li><strong>Week View:</strong> Day-by-day breakdown with today's tasks highlighted</li>
          <li><strong>Month View:</strong> Compact monthly overview</li>
          <li><strong>All Tasks View:</strong> All tasks sorted alphabetically with project names prepended</li>
        </ul>
        
        <h3>📋 Project Organization</h3>
        <ul>
          <li>Project names prepended to task text (e.g., "Website Redesign: Create wireframes")</li>
          <li>Tasks sorted alphabetically by project name, then by task text</li>
          <li>Supports both individual tasks and project-based task organization</li>
        </ul>
        
        <h3>⏰ Time Tracking</h3>
        <ul>
          <li>Completion timestamps with relative time display (e.g., "2 days ago")</li>
          <li>Works for all completed tasks, even those without original schedule/due dates</li>
          <li>Time slots show scheduled tasks at specific hours</li>
          <li>"Now" marker shows current time for today</li>
        </ul>
        
        <h3>🎯 Task Management</h3>
        <ul>
          <li>Priority tasks marked with priority indicator</li>
          <li>Blocked tasks shown with italic styling</li>
          <li>Completed tasks with strikethrough and completion timestamps</li>
          <li>Overdue due-date tasks shown at bottom of day view with days overdue count in red text</li>
          <li>Assignee and tag information displayed</li>
        </ul>
      </div>
    </div>
    
    <div class="demo-section">
      <h2>Usage Examples</h2>
      
      <h3>Basic Usage</h3>
      <div class="code-block">
&lt;clarity-agenda 
  data-view="week"
  data-show-completed-tasks="true"
  data-tasks='[...]'
  data-projects='[...]'&gt;
&lt;/clarity-agenda&gt;
      </div>
      
      <h3>Task with Completion Timestamp</h3>
      <div class="code-block">
{
  "id": "7",
  "text": "Bug fix for login issue",
  "status": "DONE",
  "schedule": "Sep 8 16:00",
  "assign": "charlie",
  <span class="highlight">"completedAt": "2024-09-08T16:30:00Z"</span>
}
      </div>
      
      <h3>Project Data Structure</h3>
      <div class="code-block">
{
  "id": "project-1",
  "name": "Website Redesign",
  "tasks": [
    {
      "id": "p1-1",
      "text": "Create wireframes",
      "status": "TODO",
      "schedule": "Sep 9 11:00",
      "assign": "diana",
      "tags": ["design", "wireframes"]
    }
  ]
}
      </div>
      
      <h3>Configuration Options</h3>
      <div class="code-block">
// Show completed tasks with completion timestamps
data-show-completed-tasks="true"

// Include project data
data-projects='[{"id": "...", "name": "...", "tasks": [...]}]'

// Set initial view
data-view="week" // "day", "week", "month", "all-tasks"
      </div>
    </div>
    
    <div class="demo-section">
      <h2>Try It Out!</h2>
      <p>Experiment with the agenda above:</p>
      
      <ol>
        <li><strong>Switch Views:</strong> Click the toggle buttons to see different perspectives</li>
        <li><strong>Day View:</strong> See detailed time slots and unscheduled tasks at the bottom</li>
        <li><strong>All Tasks View:</strong> See all tasks grouped by project with completion times</li>
        <li><strong>Navigate:</strong> Use Previous/Next buttons to move through time periods</li>
        <li><strong>Theme:</strong> Try different themes to see how it adapts</li>
      </ol>
      
      <p>The agenda component provides a comprehensive view of your tasks across different time perspectives, just like org-agenda!</p>
    </div>
  </div>

  <script src="agenda.js"></script>
  <script>
    let currentTheme = 'auto';
    
    function toggleTheme() {
      const themes = ['auto', 'light', 'dark'];
      const currentIndex = themes.indexOf(currentTheme);
      const nextIndex = (currentIndex + 1) % themes.length;
      currentTheme = themes[nextIndex];
      
      console.log('Switching to theme:', currentTheme);
      
      const root = document.documentElement;
      
      if (currentTheme === 'auto') {
        // Remove any forced theme and let CSS media queries handle it
        root.removeAttribute('data-theme');
        // Remove all custom properties to let CSS handle them
        const properties = [
          // Page theme properties
          '--bg-primary', '--bg-secondary', '--bg-tertiary', '--text-primary', '--text-secondary', '--text-muted', '--border', '--hover',
          // Web component properties
          '--clarity-outline-bg-primary', '--clarity-outline-bg-secondary', '--clarity-outline-bg-tertiary',
          '--clarity-outline-text-primary', '--clarity-outline-text-secondary', '--clarity-outline-text-muted',
          '--clarity-outline-border', '--clarity-outline-border-focus', '--clarity-outline-hover', '--clarity-outline-focus',
          '--clarity-outline-input-bg', '--clarity-outline-input-border', '--clarity-outline-popup-bg', '--clarity-outline-popup-shadow'
        ];
        
        properties.forEach(prop => {
          root.style.removeProperty(prop);
        });
      } else if (currentTheme === 'light') {
        root.setAttribute('data-theme', 'light');
        // Set light theme properties
        root.style.setProperty('--bg-primary', '#ffffff');
        root.style.setProperty('--bg-secondary', '#f8f9fa');
        root.style.setProperty('--bg-tertiary', '#e9ecef');
        root.style.setProperty('--text-primary', '#212529');
        root.style.setProperty('--text-secondary', '#6c757d');
        root.style.setProperty('--text-muted', '#adb5bd');
        root.style.setProperty('--border', '#dee2e6');
        root.style.setProperty('--hover', 'rgba(0, 0, 0, 0.05)');
        
        // Web component light theme
        root.style.setProperty('--clarity-outline-bg-primary', '#ffffff');
        root.style.setProperty('--clarity-outline-bg-secondary', '#f8f9fa');
        root.style.setProperty('--clarity-outline-bg-tertiary', '#e9ecef');
        root.style.setProperty('--clarity-outline-text-primary', '#212529');
        root.style.setProperty('--clarity-outline-text-secondary', '#6c757d');
        root.style.setProperty('--clarity-outline-text-muted', '#adb5bd');
        root.style.setProperty('--clarity-outline-border', '#dee2e6');
        root.style.setProperty('--clarity-outline-border-focus', '#3498db');
        root.style.setProperty('--clarity-outline-hover', 'rgba(0, 0, 0, 0.05)');
        root.style.setProperty('--clarity-outline-focus', 'rgba(52, 152, 219, 0.1)');
        root.style.setProperty('--clarity-outline-input-bg', '#ffffff');
        root.style.setProperty('--clarity-outline-input-border', '#dee2e6');
        root.style.setProperty('--clarity-outline-popup-bg', '#ffffff');
        root.style.setProperty('--clarity-outline-popup-shadow', '0 4px 12px rgba(0, 0, 0, 0.15)');
      } else if (currentTheme === 'dark') {
        root.setAttribute('data-theme', 'dark');
        // Set dark theme properties
        root.style.setProperty('--bg-primary', '#1a1a1a');
        root.style.setProperty('--bg-secondary', '#2d2d2d');
        root.style.setProperty('--bg-tertiary', '#404040');
        root.style.setProperty('--text-primary', '#ffffff');
        root.style.setProperty('--text-secondary', '#b0b0b0');
        root.style.setProperty('--text-muted', '#808080');
        root.style.setProperty('--border', '#404040');
        root.style.setProperty('--hover', 'rgba(255, 255, 255, 0.05)');
        
        // Web component dark theme
        root.style.setProperty('--clarity-outline-bg-primary', '#1a1a1a');
        root.style.setProperty('--clarity-outline-bg-secondary', '#2d2d2d');
        root.style.setProperty('--clarity-outline-bg-tertiary', '#404040');
        root.style.setProperty('--clarity-outline-text-primary', '#ffffff');
        root.style.setProperty('--clarity-outline-text-secondary', '#b0b0b0');
        root.style.setProperty('--clarity-outline-text-muted', '#808080');
        root.style.setProperty('--clarity-outline-border', '#404040');
        root.style.setProperty('--clarity-outline-border-focus', '#3498db');
        root.style.setProperty('--clarity-outline-hover', 'rgba(255, 255, 255, 0.05)');
        root.style.setProperty('--clarity-outline-focus', 'rgba(52, 152, 219, 0.2)');
        root.style.setProperty('--clarity-outline-input-bg', '#2d2d2d');
        root.style.setProperty('--clarity-outline-input-border', '#404040');
        root.style.setProperty('--clarity-outline-popup-bg', '#2d2d2d');
        root.style.setProperty('--clarity-outline-popup-shadow', '0 4px 12px rgba(0, 0, 0, 0.3)');
      }
      
      document.getElementById('theme-btn').textContent = `Theme: ${currentTheme}`;
    }
  </script>
</body>
</html>